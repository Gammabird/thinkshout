---
layout: post
title: An Adventure in iCal, my First Module
---

<div class="field field-name-body field-type-text-with-summary field-label-hidden"><div class="field-items"><div class="field-item even" property="content:encoded"><p>Recently <a href="http://thinkshout.com">ThinkShout</a> needed to include an “add to calendar” widget on a client’s event pages, but, to my surprise, no Drupal module existed that fit what I needed. Since this seemed like a relatively common feature, I set out to write my own module to release to the Drupal community.</p>

<p>Thus <a href="http://drupal.org/project/addtocal">Add to Cal</a> was born, a module that adds a field formatter for <a href="http://drupal.org/project/date">dates</a> in the form of a button that allows exporting an event to a small variety of popular formats, namely Google, Yahoo, Outlook, and iCal. While PHP is very much a strong point for me, this was the first real module I had created for Drupal, and it proved to be a great adventure and an excellent learning experience.</p>

<p><img src="http://www.thinkshout.com/sites/default/files/Add-to-Cal-Widget-Hello.jpg" alt="image" /></p>

<h2>Abstracting the Module for All</h2>

<p>One of the challenges for me while writing this module was abstraction. While it’s relatively easy to build and deploy a module like Add to Cal for one or two client projects, it can be a bit formidable for a first-time module developer to abstract the functionality for use on any site. Abstraction means removing all hard-coded values and providing a mechanism for easy integration.</p>

<p>For Add to Cal, the best abstraction method was to make it available as a field formatter. This provides an easy way for the widget to be attached to a date field belonging to any type of entity and, if desired, allows the widget to be individually present on multiple entities.</p>

<h2>How it Works</h2>

<p>The goal was to make Add to Cal fairly simple to install and set up for any site. Once the module is enabled, it can be attached to a display through the “Manage Display” tab. Next to a date field, choose “Add to Cal” for the format. That’s pretty much it!</p>

<p>The field formatter settings provide a way to map a location and description from other fields on the same bundle, and specify whether the widget is shown for past events (which is turned off by default). The standard date field options are also present, so you can still set the date format and display options for the field.</p>

<p>Once enabled, the Add to Cal widget will automatically appear next to the date field that uses it as a format. It comes with some basic styling that can be easily modified through CSS.</p>

<p><img src="http://www.thinkshout.com/sites/default/files/Field-formatter-settings.jpg" alt="image" /></p>

<h2>What’s Next?</h2>

<p>The first beta version has been released on drupal.org. But the adventure doesn’t stop here – I plan on implementing several changes in the near future to make the module more robust.</p>
</div></div></div><div class="field field-name-taxonomy-vocabulary-1 field-type-taxonomy-term-reference field-label-above"><div class="field-label">Tags:&nbsp;</div><div class="field-items"><div class="field-item even"><a href="/blog/category/modules" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">modules</a></div><div class="field-item odd"><a href="/blog/category/drupal-planet" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">Drupal Planet</a></div><div class="field-item even"><a href="/blog/category/events" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">events</a></div><div class="field-item odd"><a href="/taxonomy/term/45" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">Drupal Give</a></div></div></div>
